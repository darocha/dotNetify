"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");}function _inherits(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}});t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)}var _createClass=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),_get=function(n,t,i){var e=!0,r,f,o;n:while(e){var u=n,s=t,h=i;if(e=!1,u===null&&(u=Function.prototype),r=Object.getOwnPropertyDescriptor(u,s),r===undefined){if(f=Object.getPrototypeOf(u),f===null)return undefined;n=f;t=s;i=h;e=!0;r=f=undefined;continue n}else return"value"in r?r.value:(o=r.get,o===undefined)?undefined:o.call(h)}},GridView=function(n){function t(n){var i=this;_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.vm=dotnetify.react.connect("GridViewVM",this);this.dispatch=function(n){return i.vm.$dispatch(n)};this.dispatchState=function(n){i.setState(n);i.vm.$dispatch(n)};this.state=window.vmStates.GridViewVM||{};this.state.openWizard=!1}return _inherits(t,n),_createClass(t,[{key:"componentWillUnmount",value:function(){this.vm.$destroy()}},{key:"render",value:function(){var n=this,t=function(t){n.setState({openWizard:!1});n.dispatch({Update:t})},i=function(i){if(i)return React.createElement(EditWizard,{open:!0,strings:n.state.LocalizedStrings,employeeDetails:n.state.Details,reportToSearchResult:n.state.ReportToSearchResult,reportToError:n.state.ReportToError,onReportToChange:function(t){return n.dispatch({ReportToSearch:t})},onFinish:t,onCancel:function(){return n.setState({openWizard:!1})}})};return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"header clearfix"},React.createElement("h3",null,"Example: Grid View")),React.createElement(MuiThemeProvider,null,React.createElement("div",null,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-12"},React.createElement(AppBar,{style:{marginBottom:"1em"},iconElementLeft:React.createElement(SearchBox,{strings:this.state.LocalizedStrings,onChange:function(t){return n.dispatch({EmployeeSearch:t})}}),iconElementRight:React.createElement(LanguageToggle,{onToggle:function(t){return n.dispatch({CultureCode:t})}})}))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-8"},React.createElement(EmployeeTable,{data:this.state.Employees,strings:this.state.LocalizedStrings,select:this.state.SelectedId,onSelect:function(t){return n.dispatchState({SelectedId:t})}}),React.createElement(Pagination,{style:{marginTop:"1em",float:"right"},pages:this.state.Pagination,select:this.state.SelectedPage,onSelect:function(t){return n.dispatchState({SelectedPage:t})}})),React.createElement("div",{className:"col-md-4"},React.createElement(EmployeeDetails,{data:this.state.Details,strings:this.state.LocalizedStrings,onEdit:function(){return n.setState({openWizard:!0})}}))),i(this.state.openWizard))))}}]),t}(React.Component),SearchBox=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={searchText:""}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this,t=function(t){n.setState({searchText:t.target.value});n.props.onChange(t.target.value)};return React.createElement("div",{style:{padding:"0 1em",borderRadius:"4px",backgroundColor:"#11cde5"}},React.createElement(IconSearch,{style:{width:20,height:20}}),React.createElement(TextField,{id:"SearchBox",hintText:this.props.strings.SearchLabel,value:this.state.searchText,onChange:t}))}}]),t}(React.Component),LanguageToggle=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={code:"en-US",language:"English"}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this,t=function(t,i){var r=i?"fr-FR":"en-US";n.setState({code:r});n.setState({language:i?"Français":"English"});n.props.onToggle(r)};return React.createElement(Toggle,{style:{marginTop:"1em",width:"7em"},trackSwitchedStyle:{backgroundColor:"#e0e0e0"},thumbSwitchedStyle:{backgroundColor:"#11cde5"},onToggle:t,label:this.state.language,labelStyle:{color:"white",fontSize:"medium"}})}}]),t}(React.Component),EmployeeTable=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this,t=function(t){t.length>0&&i(n.props.data[t[0]].Id)},i=function(t){if(t!=n.props.select)n.props.onSelect(t)},r=this.props.data.map(function(t){return React.createElement(TableRow,{key:t.Id,selected:n.props.select==t.Id},React.createElement(TableRowColumn,null,React.createElement("div",null,t.FirstName)),React.createElement(TableRowColumn,null,React.createElement("div",null,t.LastName)))});return React.createElement(Table,{selectable:!0,onRowSelection:t},React.createElement(TableHeader,{displaySelectAll:!1,adjustForCheckbox:!1},React.createElement(TableRow,null,React.createElement(TableHeaderColumn,null,this.props.strings.FirstName),React.createElement(TableHeaderColumn,null,this.props.strings.LastName))),React.createElement(TableBody,{displayRowCheckbox:!1,showRowHover:!0},r))}}]),t}(React.Component),Pagination=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this,t=this.props.pages.map(function(t){return React.createElement(Paper,{key:t,style:{display:"inline",padding:".5em 0"}},React.createElement(FlatButton,{style:{minWidth:"1em"},label:t,disabled:n.props.select==t,onClick:function(){return n.props.onSelect(t)}}))});return React.createElement("div",{style:this.props.style},t)}}]),t}(React.Component),EmployeeDetails=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this,t=this.props.data,i=React.createElement(IconEdit,{style:{width:20,height:20},color:"#8b8c8d"}),r=React.createElement(IconPhone,{style:{width:24,height:24}}),u=function(t){return t!=null?n.props.strings.ReportTo+" "+t:""},f=function(){if(n.props.data.Id>0)return React.createElement(FlatButton,{label:n.props.strings.EditLabel,icon:i,onClick:n.props.onEdit})};return React.createElement(Card,null,React.createElement(CardHeader,{title:t.FullName,subtitle:u(t.ReportToName),style:{borderBottom:"solid 1px #e6e6e6"},subtitleColor:"#00abc4"}),React.createElement(CardText,null,r,React.createElement("span",{style:{verticalAlign:"super"}},t.Phone)),React.createElement(CardActions,null,f()))}}]),t}(React.Component),EditWizard=function(n){function t(n){_classCallCheck(this,t);_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n);this.state={firstName:this.props.employeeDetails.FirstName,lastName:this.props.employeeDetails.LastName,reportToName:this.props.employeeDetails.ReportToName,reportTo:this.props.employeeDetails.ReportTo,step:0,maxStep:2,disableNext:!1}}return _inherits(t,n),_createClass(t,[{key:"render",value:function(){var n=this,t=function(){return n.setState({step:n.state.step-1})},i=function(){return n.setState({step:n.state.step+1})},r=function(){return n.props.onFinish({Id:n.props.employeeDetails.Id,FirstName:n.state.firstName,LastName:n.state.lastName,ReportTo:n.state.reportTo})},u=[React.createElement(FlatButton,{label:this.props.strings.Back,onClick:t,disabled:this.state.step==0}),React.createElement(FlatButton,{label:this.props.strings.Next,onClick:i,disabled:this.state.step==this.state.maxStep||this.state.disableNext}),React.createElement(FlatButton,{label:this.props.strings.Finish,primary:!0,onClick:r,disabled:this.state.step!=this.state.maxStep}),React.createElement(FlatButton,{label:this.props.strings.Cancel,onClick:function(){return n.props.onCancel()}})],e=function(t){n.state.details.ReportToName=t;n.props.onReportToChange(t)},f=function(t){var i,r;switch(t){case 0:return React.createElement("div",null,React.createElement(TextField,{id:"FirstName",floatingLabelText:n.props.strings.FirstName,value:n.state.firstName,onChange:function(t){return n.setState({firstName:t.target.value})}}),React.createElement(TextField,{id:"LastName",floatingLabelText:n.props.strings.LastName,value:n.state.lastName,onChange:function(t){return n.setState({lastName:t.target.value})}}));case 1:var u=n.props.reportToSearchResult.map(function(n){return n.Name}),f=n.state.reportToName,e=function(t){var i=t.length>0?n.props.reportToSearchResult.filter(function(n){return n.Name.toUpperCase()==t.toUpperCase()}):{Id:0,Name:""};n.setState({reportTo:i.length>0?i[0].Id:-1});n.setState({reportToName:i.length>0?i[0].Name:t});n.setState({disableNext:i.length==0});n.props.onReportToChange(t)};return React.createElement(AutoComplete,{id:"AutoComplete",floatingLabelText:n.props.strings.ReportTo,hintText:n.props.strings.ReportToHintText,filter:AutoComplete.caseInsensitiveFilter,searchText:f,errorText:n.props.strings[n.props.reportToError],dataSource:u,onUpdateInput:e});case 2:return i={display:"inline",padding:".5em 1em",backgroundColor:"#e6e6e6"},r=n.state.reportToName!=null?n.state.reportToName:n.props.strings.NoOne,React.createElement("div",{style:{paddingTop:"2.2em"}},React.createElement(Paper,{style:i},n.state.firstName," ",n.state.lastName),React.createElement("span",{style:{margin:"0 1em"}},n.props.strings.ReportTo," "),React.createElement(Paper,{style:i},r))}};return React.createElement(Dialog,{open:this.props.open,actions:u},React.createElement(Stepper,{activeStep:this.state.step},React.createElement(Step,null,React.createElement(StepLabel,null,this.props.strings.Name)),React.createElement(Step,null,React.createElement(StepLabel,null,this.props.strings.Manager)),React.createElement(Step,null,React.createElement(StepLabel,null,this.props.strings.Confirm))),React.createElement("div",{style:{height:"4em"}},f(this.state.step)))}}]),t}(React.Component);